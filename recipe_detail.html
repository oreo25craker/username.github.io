<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>레시피 상세 정보</title>
    <style>
        /* 스타일 설정 */
    </style>
</head>
<body>

    <h1>레시피 상세 정보</h1>
    <div id="recipe-detail">
        <!-- 레시피 상세 정보가 여기에 표시됩니다 -->
    </div>

    <script>
        // URL에서 RCP_SEQ 값을 추출
        function getRecipeIdFromUrl() {
            const params = new URLSearchParams(window.location.search);
            return params.get("RCP_SEQ");
        }

        // API에서 레시피 상세 정보 가져오기
        function fetchRecipeDetail() {
            const recipeId = getRecipeIdFromUrl();
            if (!recipeId) {
                document.getElementById('recipe-detail').innerHTML = '<p>레시피 ID가 제공되지 않았습니다.</p>';
                return;
            }

            const apiKey = "cbe2a668f4ef4e189a82";
            const serviceId = "COOKRCP01";
            const dataType = "xml";
            const apiUrl = `https://openapi.foodsafetykorea.go.kr/api/${apiKey}/${serviceId}/${dataType}/1/1/RCP_SEQ=${recipeId}`;

            fetch(apiUrl)
                .then(response => response.text())
                .then(data => {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(data, "application/xml");

                    const recipe = xmlDoc.getElementsByTagName("row")[0];
                    const recipeDetail = {
                        RCP_NM: recipe.getElementsByTagName("RCP_NM")[0].textContent,
                        RCP_WAY2: recipe.getElementsByTagName("RCP_WAY2")[0].textContent,
                        MANUAL: recipe.getElementsByTagName("MANUAL01")[0]?.textContent || "N/A"
                    };

                    displayRecipeDetail(recipeDetail);
                })
                .catch(error => console.error('레시피 상세 정보 가져오기 실패:', error));
        }

        // 레시피 상세 정보를 화면에 표시하는 함수
        function displayRecipeDetail(recipe) {
            const recipeDetailDiv = document.getElementById('recipe-detail');
            recipeDetailDiv.innerHTML = `
                <h2>${recipe.RCP_NM}</h2>
                <p><strong>조리 방법:</strong> ${recipe.RCP_WAY2}</p>
                <p><strong>조리 방법 설명:</strong> ${recipe.MANUAL}</p>
            `;
        }

        // 페이지 로드 시 레시피 상세 정보 가져오기
        window.onload = fetchRecipeDetail;
    </script>

</body>
</html>
